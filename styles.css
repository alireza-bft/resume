/* ====== Theme ====== */
:root{
  --bg:#ffffff;
  --panel:#ffffff;
  --text:#0f172a;
  --muted:#475569;
  --accent:#2ea8ff;
  --accent-2:#8b5cf6;
  --shadow:0 10px 25px rgba(2,6,23,.07), 0 2px 8px rgba(2,6,23,.05);
  --radius:16px;
}

/* Header height (used by mega/backdrop) */
.site-header{ --header-h: 64px; }

*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, sans-serif;
  color:var(--text);
  background:var(--bg);
  line-height:1.6;
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
}
body.no-scroll{ overflow:hidden }

/* Utilities */
.muted{ color:var(--muted) }
.row{ display:flex; align-items:center; gap:12px; flex-wrap:wrap }
.chip{
  display:inline-block; padding:6px 10px; border-radius:999px;
  border:1px solid rgba(2,6,23,.12); background:rgba(2,6,23,.04);
  font-weight:600; font-size:14px;
}
/* stop drag ghost while we custom-drag the row */
.promo-card, .promo-card img{ -webkit-user-drag:none; user-drag:none; }

a{color:var(--accent); text-decoration:none}
a:hover{ text-decoration:underline }
.promo-card, .promo-card:hover{ text-decoration:none }

img{max-width:100%; display:block}
.container{max-width:1100px; margin-inline:auto; padding:0 20px}

/* ====== Header / Nav ====== */
.site-header{
  position:sticky; top:0; left:0; right:0; z-index:1000;
  background:rgba(255,255,255,.78);
  backdrop-filter:blur(10px) saturate(120%);
  border-bottom:1px solid rgba(2,6,23,.06);
  transition:transform .35s ease;
}
.site-header.nav--hidden{ transform: translateY(-100%); }
#hoverEdge{ position:fixed; top:0; left:0; right:0; height:12px; z-index:1100; }

.nav-inner{display:flex; align-items:center; justify-content:space-between; height:var(--header-h)}
.brand{display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--text)}
.brand-logo{width:34px; height:34px; border-radius:10px; background:linear-gradient(135deg, var(--accent), var(--accent-2)); box-shadow:var(--shadow)}
.brand-text{font-weight:800; letter-spacing:.3px}

.nav-links{display:flex; align-items:center; gap:22px}
.nav-links > a, .nav-link{
  color:var(--text); font-weight:600; background:transparent; border:0; padding:10px 8px; border-radius:8px; cursor:pointer;
}
.nav-links > a:hover, .nav-link:hover{ background:rgba(2,6,23,.05); text-decoration:none }
.btn{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:12px; border:1px solid rgba(2,6,23,.12); background:transparent; color:var(--text); font-weight:700; box-shadow:var(--shadow) }
.btn.ghost:hover{ background:rgba(2,6,23,.05); text-decoration:none }
.menu{display:none}

/* ====== Mega menu ====== */
.nav-item{ position:relative; }

/* Fixed panel attached to header (no gap, no overlap) */
.mega{
  position:fixed; left:50%; top:var(--header-h);
  width:min(1000px, calc(100vw - 32px));
  background:var(--panel); border:1px solid rgba(2,6,23,.06); border-radius:18px;
  box-shadow:var(--shadow);
  padding:18px;

  opacity:0; visibility:hidden; pointer-events:none;
  transform:translateX(-50%) scale(.985);
  transform-origin:top center;
  transition:
    opacity .28s ease,
    transform .32s cubic-bezier(.2,.7,.2,1),
    visibility 0s linear .32s;
  z-index:1001;
}
.nav-item.open .mega{
  opacity:1; visibility:visible; pointer-events:auto;
  transform:translateX(-50%) scale(1);
  transition:
    opacity .22s ease,
    transform .28s cubic-bezier(.2,.7,.2,1),
    visibility 0s;
}

.mega-grid{ display:grid; grid-template-columns:2fr 1fr 1fr; gap:18px }
.mega-kicker{ color:var(--muted); margin:0 0 6px }
.mega-title{ margin:0 0 8px; font-size:22px }
.mega-link{ display:block; padding:8px 10px; border-radius:10px; color:var(--text) }
.mega-link:hover{ background:rgba(2,6,23,.05); text-decoration:none }
.mega-list{ margin:0; padding-left:16px }
.mega-note{ color:var(--muted); margin:0 }

/* Invisible bridge lets the mouse travel from button to panel */
.nav-item.has-mega::after{
  content:"";
  position:absolute;
  left:-12px; right:-12px; top:100%;
  height:14px;
}

/* ====== Backdrop (blur + dim under header) ====== */
.nav-backdrop{
  position:fixed; top:var(--header-h); left:0; right:0; bottom:0; z-index:900;
  background:rgba(0,0,0,.14); /* gentle dim like Apple */
  -webkit-backdrop-filter:blur(14px) saturate(140%);
  backdrop-filter:blur(14px) saturate(140%);
  opacity:0; pointer-events:none; transition:opacity .25s ease;
  will-change:opacity, backdrop-filter;
}
.nav-backdrop.active{ opacity:1; pointer-events:auto; }

/* Always-on fallback blur (if backdrop-filter missing) */
html.nav-open main,
html.nav-open .site-footer{
  filter: blur(8px) saturate(120%);
  transition: filter .25s ease;
  will-change: filter;
}

/* ====== Mobile Sheet ====== */
#sheet{ position:fixed; inset:0; background:rgba(0,0,0,.45); z-index:1200; display:none }
#sheet:not(.hidden){ display:block }
.sheet-panel{
  background:var(--panel); margin:0 0 0 auto; width:min(90vw,360px); height:100%;
  padding:18px; border-left:1px solid rgba(2,6,23,.08); box-shadow:var(--shadow)
}
.sheet-head{ display:flex; justify-content:space-between; align-items:center }
.sheet-links{ display:flex; flex-direction:column; gap:8px; margin-top:14px }
.sheet-link{ color:var(--text); padding:10px; border-radius:10px }
.sheet-link:hover{ background:rgba(2,6,23,.05); text-decoration:none }

/* ====== Hero ====== */
.hero{ padding:64px 0 24px; }
.hero-grid{ display:grid; gap:36px; grid-template-columns:1.15fr .85fr; align-items:center }
@media (max-width: 900px){ .hero-grid{ grid-template-columns:1fr } }
.tag{ display:inline-flex; align-items:center; gap:8px; font-weight:700; font-size:12px; text-transform:uppercase; letter-spacing:.12em; background:rgba(46,168,255,.15); color:var(--accent); padding:8px 12px; border-radius:999px }
.headline{ font-size:clamp(32px,5vw,56px); line-height:1.15; margin:14px 0 }
.name-gradient{ background:linear-gradient(90deg, var(--accent), var(--accent-2)); -webkit-background-clip:text; background-clip:text; color:transparent; font-weight:800 }
.sub{ color:#0f172a; opacity:.8; font-size:18px }

.hero-card{ background:var(--panel); border:1px solid rgba(2,6,23,.06); padding:18px; border-radius:var(--radius); box-shadow:var(--shadow) }
.hero-photo{ border-radius:var(--radius); aspect-ratio:1/1; object-fit:cover; transform:scale(1); transition:transform .5s ease; will-change:transform }
.hero-card:hover .hero-photo{ transform:scale(1.06); }

/* ====== Sections / Cards ====== */
section{ padding:56px 0 }
.section-title{ font-size:26px; margin:0 0 18px; display:flex; align-items:center; gap:12px }
.section-title span{ width:10px; height:10px; border-radius:50%; background:var(--accent); box-shadow:0 0 0 6px rgba(46,168,255,.20) }

.grid{ display:grid; gap:18px }
.grid.cols-3{ grid-template-columns: repeat(3,1fr) }
.grid.cols-2{ grid-template-columns: repeat(2,1fr) }

.card{
  background:var(--panel);
  border:1px solid rgba(2,6,23,.06);
  border-radius:var(--radius);
  padding:18px;
  box-shadow:var(--shadow);
  transition:transform .2s ease, box-shadow .2s ease;
}
.card:hover{ transform:translateY(-3px); box-shadow:0 18px 40px rgba(2,6,23,.18) }
.card h3{ margin:0 0 8px; font-size:18px }
.card p{ color:var(--muted); margin:0 }

/* Fields */
.field{ width:100%; padding:12px; border-radius:12px; border:1px solid rgba(2,6,23,.12); background:transparent; color:var(--text) }

/* Contact polish */
#contact .card ul{ margin:8px 0 0; padding-left:18px; }
#contact form .field{ margin-top:6px; }
#contact form .btn{ margin-top:6px; }

/* ====== Timeline ====== */
.timeline{ position:relative; margin-top:8px; padding-left:28px }
.timeline:before{ content:""; position:absolute; left:12px; top:0; bottom:6px; width:2px; background:linear-gradient(var(--accent), transparent) }
.timeline-item{ position:relative; margin:0 0 18px; padding-left:10px }
.timeline-item:before{ content:""; position:absolute; left:8px; top:6px; width:10px; height:10px; border-radius:50%; background: var(--accent) }

/* ====== Projects row ====== */
.cards-wrap{ position:relative; --arrow-offset:-56px; }

.cards-row{
  display:grid;
  grid-auto-flow:column;
  grid-auto-columns:minmax(280px,1fr);
  gap:22px;
  overflow-x:auto;
  padding:6px 2px 14px;
  cursor:grab; user-select:none;
  -ms-overflow-style:none; scrollbar-width:none;
  background:transparent;
  touch-action: pan-y;
  overscroll-behavior-x: contain;
  overscroll-behavior-y: auto;
}
.cards-row::-webkit-scrollbar{ display:none }
.cards-row.dragging{ cursor:grabbing; }
.cards-row.dragging .promo-card,
.cards-row.dragging .promo-media img{
  transform:none !important;
  transition:none !important;
}

/* Card */
.promo-card{
  position:relative;
  display:grid; grid-template-rows:1fr auto;
  background:#fff;
  border:1px solid rgba(2,6,23,.12);
  border-radius:18px;
  box-shadow:none;
  color:inherit; overflow:hidden;
  transform:scale(1); will-change:transform;
  transition: transform .75s cubic-bezier(.2,.7,.2,1), border-color .35s ease;
}
.promo-card:hover{ transform:scale(1.03); border-color:rgba(2,6,23,.18); }

.promo-media{ aspect-ratio:16/10; overflow:hidden; background:transparent }
.promo-media img{ width:100%; height:100%; object-fit:cover; transform:scale(1); transition:transform .75s cubic-bezier(.2,.7,.2,1) }
.promo-card:hover .promo-media img{ transform:scale(1.06) }

.promo-body{ padding:16px }
.promo-kicker{ margin:0 0 4px; font-size:.85rem; letter-spacing:.04em; text-transform:uppercase; color:var(--muted) }
.promo-body h3{ margin:0 0 4px; font-size:20px; color:var(--text) }
.promo-sub{ margin:0 0 8px; color:var(--muted) }
.promo-foot{ margin:0; font-size:.9rem; color:var(--muted) }

/* Plus badge */
.card-plus{
  position:absolute; right:10px; bottom:10px;
  width:36px; height:36px; border-radius:50%;
  border:0; background:#111; color:#fff; font-size:20px; line-height:36px; cursor:pointer;
  display:grid; place-items:center;
}
.promo-card:hover .card-plus{ transform:scale(1.05) }

/* Arrows */
.cards-arrow{
  position:absolute; top:40%; transform:translateY(-50%);
  width:42px; height:42px; border-radius:50%;
  background:rgba(255,255,255,.9); color:var(--text);
  border:1px solid rgba(2,6,23,.12);
  display:grid; place-items:center;
  backdrop-filter:blur(8px);
  cursor:pointer; user-select:none;
}
.cards-arrow:hover{ background:#fff }
.cards-arrow.left{ left:var(--arrow-offset) }
.cards-arrow.right{ right:var(--arrow-offset) }

/* staggered reveal */
#projects.reveal .promo-card{ opacity:0; transform:translateY(28px) scale(0.98) }
#projects.reveal.in .promo-card{
  opacity:1; transform:scale(1);
  transition: opacity 1.35s ease, transform 1.35s cubic-bezier(.2,.7,.2,1);
}
#projects.reveal.in .promo-card:hover{ transform:scale(1.03); }
#projects.reveal.in .promo-card:nth-child(1){ transition-delay:.05s }
#projects.reveal.in .promo-card:nth-child(2){ transition-delay:.20s }
#projects.reveal.in .promo-card:nth-child(3){ transition-delay:.35s }
#projects.reveal.in .promo-card:nth-child(4){ transition-delay:.50s }
#projects.reveal.in .promo-card:nth-child(5){ transition-delay:.65s }

/* ====== Modal ====== */
.modal{ position:fixed; inset:0; z-index:1400; display:none }
.modal.open{ display:block }
.modal-backdrop{
  position:absolute; inset:0;
  background:rgba(0,0,0,.48);
  -webkit-backdrop-filter:blur(12px) saturate(120%);
  backdrop-filter:blur(12px) saturate(120%);
  opacity:0; transition:opacity .45s ease;
}
.modal.open.animate-in .modal-backdrop{ opacity:1 }
.modal.closing .modal-backdrop{ opacity:0; transition:opacity .2s ease }

.modal-panel{
  position:relative; max-width:1100px;
  margin:clamp(16px,5vh,36px) auto;
  background:#fff; border-radius:24px; padding:22px;
  box-shadow:var(--shadow), 0 60px 120px rgba(0,0,0,.25);
  transform:translateY(28px) scale(.98); opacity:0;
  transition:transform .6s cubic-bezier(.2,.7,.2,1), opacity .6s ease;
  outline:none;
  max-height:calc(100vh - 2 * clamp(16px,5vh,36px));
  overflow:auto;
}
.modal.open.animate-in .modal-panel{ transform:none; opacity:1 }
.modal.closing .modal-panel{ transform:translateY(28px) scale(.98); opacity:0; transition:transform .2s ease, opacity .2s ease }

.modal-close{
  position:absolute; top:10px; right:10px;
  width:42px; height:42px; border-radius:12px;
  border:1px solid rgba(2,6,23,.12); background:#fff; cursor:pointer;
  box-shadow:var(--shadow); font-size:18px;
}
.modal-grid{ display:grid; grid-template-columns:1.1fr .9fr; gap:20px; align-items:start }
@media (max-width: 900px){ .modal-grid{ grid-template-columns:1fr } }
.modal-media img{ width:100%; border-radius:18px; box-shadow:var(--shadow) }
.modal-body h3{ margin:6px 0 10px; font-size:30px }
.modal-kicker,.modal-tech{ color: var(--muted) }
.modal-bullets{ margin:10px 0 0; padding-left:18px }

/* ====== Reveal ====== */
@media (prefers-reduced-motion: no-preference){
  .reveal{ opacity:0; transform:translateY(32px); transition:opacity 1.4s ease, transform 1.4s cubic-bezier(.2,.7,.2,1); will-change:opacity, transform; }
  .reveal.in{ opacity:1; transform:none; }
  .in-on-load{ animation: rise 1.2s cubic-bezier(.2,.7,.2,1) both; }
  .load-rise{ animation: rise 1.5s cubic-bezier(.2,.7,.2,1) both; }
  @keyframes rise{ from{ opacity:0; transform:translateY(32px);} to{ opacity:1; transform:none; } }
}

/* ====== Footer ====== */
.site-footer{
  padding:28px 0; color:var(--muted);
  border-top:1px solid rgba(2,6,23,.06);
  background:#fff;
}

/* ====== Responsive ====== */
@media (max-width: 1200px){ .cards-wrap{ --arrow-offset:-24px; } }
@media (max-width: 900px){
  .nav-links{ display:none }
  .menu{ display:inline-flex }
  .grid.cols-3{ grid-template-columns: 1fr 1fr }
}
@media (max-width: 640px){
  .grid.cols-3, .grid.cols-2{ grid-template-columns: 1fr }
  .cards-wrap{ --arrow-offset:-8px; }
}
